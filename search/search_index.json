{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Insecure Bank Corporation","text":"<p>This documentation provides comprehensive information about the Insecure Bank application, a deliberately vulnerable Django-based web application designed for security testing and educational purposes.</p> <p>Technology Stack:</p> <ul> <li>Language: Python 3.10+, uv</li> <li>Framework: Django 4.2.4</li> <li>Database: SQLite3</li> <li>Code Quality: Pre-commit, Ruff, Ty</li> <li>Testing: Pytest, Playwright</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<p>New to the project? Start here:</p> <ol> <li>Project Overview - Understand what this project is about</li> <li>Development Setup - Set up your local environment</li> <li>Running the Application - Start the application</li> <li>Contributing Guide - Learn how to contribute</li> </ol>"},{"location":"#important-notice","title":"Important Notice","text":"<p>This application contains intentional security vulnerabilities and should never be deployed to production or exposed to the internet. It is designed exclusively for controlled testing and educational purposes.</p>"},{"location":"context/","title":"Context<sup>1</sup>","text":"<p>\"They say 'practice makes perfect,' but in testing, 'practice makes permanent errors if not caught early.'\"</p> <p>Saint\u2011Nulle\u2011part\u2011dans\u2011le\u2011fond\u2011du\u2011Bois is a tiny Qu\u00e9bec town of 237 people. Everything important sits in one shared building: town hall, church, general store, and the only Qu\u00e9bec branch of the Insecure Bank Corporation. Lucile is the bank\u2019s lone teller. The bell over the door does every job\u2014mass, meetings, and reminders.</p> <p>In January, the bank was hacked. Lucile\u2019s screen flashed a strange message, and it became clear that something bad had just happened. She rang the bell three times. The mayor gathered everyone and met with the Insecure Bank Corporation executives, who announced that major improvements would be undertaken to increase the security of the bank\u2019s application.</p> <p>A sole IT consultant was willing to drive a snowmobile to a town sitting like a pin in a quilt of spruce and snow. He made a slew of recommendations, but the IBC top brass focused only on financial profitability and wanted the bare minimum done. Together, they negotiated to implement the following security improvements:</p> <ul> <li>Scan the <code>insecure-bank</code> repository for Software Development Lifecycle (SDLC) bad practices</li> <li>Fix the vulnerability associated with the <code>PyYAML</code> package, deemed by the consultant the most critical of them all</li> <li>Mute all other dependency vulnerabilities until February 27, 2026; a new team will take over after that date</li> <li>Scan the <code>src/web/views.py</code> file for code vulnerabilities</li> <li>Apply the necessary corrections to <code>get_file_checksum</code></li> <li>Focus scanning on new code and on dependency vulnerabilities for the time being</li> <li>Inspect the container\u2019s upstream base image for vulnerabilities</li> <li>Identify upstream vulnerabilities relative to the project\u2019s inherent vulnerabilities</li> <li>Implement corrections at the container level while staying on <code>python3.10.x-alpine-3.xx</code> to reduce the risk level of this application</li> <li>Generate a software bill of materials for the final container image shipped to production</li> <li>Parse the final software bill of materials to list all identified vulnerabilities</li> </ul> <p>The mayor, Yvette (a part-time CS student), and the IBC C\u2011suite all agreed that before the service point can reopen, the IBC must demonstrate that these recommendations have been fulfilled and that the web application vulnerabilities are under control.</p>"},{"location":"context/#tldr","title":"TL;DR","text":"<p>Security Overview</p> <ol> <li> <p>Thanks, ChatGPT-5.\u00a0\u21a9</p> </li> </ol>"},{"location":"overview/","title":"Overview","text":"<p>The Insecure Bank application is a deliberately vulnerable Django-based web application designed for security testing and educational purposes. This project demonstrates common security vulnerabilities in web applications and provides a safe environment for security professionals to practice identification and exploitation techniques.</p>"},{"location":"overview/#purpose","title":"Purpose","text":"<p>This application serves multiple purposes:</p> <ul> <li>Security Training: Provides a realistic banking application with intentional vulnerabilities for educational purposes</li> <li>Security Testing: Allows security teams to test and validate security tools and scanning capabilities</li> <li>Development Training: Helps developers understand common security pitfalls and how to avoid them in production code</li> </ul>"},{"location":"overview/#technology-stack","title":"Technology Stack","text":"<p>The application is built using the following technologies:</p> <ul> <li>Framework: Django 4.2.4</li> <li>Language: Python 3.10+</li> <li>Database: SQLite3</li> <li>Frontend: Bootstrap CSS with custom JavaScript</li> <li>Templating: Django templates</li> <li>Containerization: Docker</li> </ul>"},{"location":"overview/#key-features","title":"Key Features","text":"<p>The application includes the following banking features:</p> <ul> <li>User authentication and session management</li> <li>Account dashboard with balance display</li> <li>Transaction history viewing</li> <li>Fund transfer between accounts</li> <li>Credit activity tracking</li> <li>Administrative user management</li> </ul>"},{"location":"overview/#warning","title":"Warning","text":"<p>This application contains intentional security vulnerabilities and should never be deployed to a production environment or exposed to the internet. It is designed exclusively for controlled testing and educational purposes.</p>"},{"location":"architecture/db/","title":"Database Architecture","text":"<p>The application uses SQLite for simplicity. The schema includes:</p> <ul> <li>Users table for authentication</li> <li>Accounts table for bank accounts</li> <li>Operations table for transactions</li> </ul> <p>Foreign key relationships maintain referential integrity between tables.</p>"},{"location":"architecture/middleware/","title":"Middleware Stack","text":"<p>Custom middleware in <code>src/config/middleware.py</code> handles:</p> <ul> <li>Authentication requirements</li> <li>Request/response processing</li> <li>Security headers</li> </ul>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>The project follows Django's standard application structure with clear separation of concerns:</p> <pre><code>insecure-banking/\n\u251c\u2500\u2500 Dockerfile            # Docker container definition\n\u251c\u2500\u2500 manage.py             # Django management script\n\u251c\u2500\u2500 pyproject.toml        # Project metadata and dependencies\n\u251c\u2500\u2500 docs/                 # Documentation\n\u251c\u2500\u2500 scripts/              # Utility scripts\n\u251c\u2500\u2500 src/                  # Application source code\n\u2502   \u251c\u2500\u2500 config/           # Django project configuration\n\u2502   \u251c\u2500\u2500 data/             # Data handling utilities\n\u2502   \u2514\u2500\u2500 web/              # Main web application\n\u2514\u2500\u2500 tests/                # Test suite\n    \u251c\u2500\u2500 e2e/              # End-to-end tests\n    \u251c\u2500\u2500 integration/      # Integration tests\n    \u251c\u2500\u2500 security/         # Security tests\n    \u2514\u2500\u2500 unit/             # Unit tests\n</code></pre>"},{"location":"architecture/overview/#application-layers","title":"Application Layers","text":""},{"location":"architecture/overview/#configuration-layer","title":"Configuration Layer","text":"<p>Located in <code>src/config/</code>, this layer contains Django project configuration:</p> <ul> <li><code>settings.py</code>: Django settings and configuration</li> <li><code>urls.py</code>: Root URL routing</li> <li><code>wsgi.py</code> and <code>asgi.py</code>: WSGI/ASGI application entry points</li> <li><code>middleware.py</code>: Custom middleware components</li> </ul>"},{"location":"architecture/overview/#data-layer","title":"Data Layer","text":"<p>Located in <code>src/data/</code>, this layer handles data operations:</p> <ul> <li>YAML data processing</li> <li>Data serialization and deserialization</li> </ul>"},{"location":"architecture/overview/#web-application-layer","title":"Web Application Layer","text":"<p>Located in <code>src/web/</code>, this is the main application layer:</p> <ul> <li><code>models.py</code>: Database models (User, Account, Operation)</li> <li><code>views.py</code>: View functions handling HTTP requests</li> <li><code>services.py</code>: Business logic and service functions</li> <li><code>templates/</code>: HTML templates</li> <li><code>static/</code>: CSS, JavaScript, and static assets</li> <li><code>migrations/</code>: Database migration files</li> </ul>"},{"location":"architecture/overview/#component-interactions","title":"Component Interactions","text":""},{"location":"architecture/overview/#url-routing","title":"URL Routing","text":"<p>URLs are configured in <code>src/config/urls.py</code> and mapped to view functions in <code>src/web/views.py</code>.</p>"},{"location":"architecture/overview/#views","title":"Views","text":"<p>Views handle HTTP requests, process data through services, and return HTTP responses using templates.</p>"},{"location":"architecture/overview/#services","title":"Services","text":"<p>The service layer in <code>src/web/services.py</code> contains business logic separated from view logic, including:</p> <ul> <li>Authentication operations</li> <li>Account operations</li> <li>Transaction processing</li> </ul>"},{"location":"architecture/overview/#models","title":"Models","text":"<p>Django ORM models represent database tables:</p> <ul> <li><code>User</code>: User accounts and authentication</li> <li><code>Account</code>: Bank accounts with balances</li> <li><code>Operation</code>: Transaction records</li> </ul>"},{"location":"architecture/overview/#templates","title":"Templates","text":"<p>Django templates in <code>src/web/templates/</code> provide the user interface:</p> <ul> <li>Base template with common layout</li> <li>Feature-specific templates for different pages</li> <li>Partial templates for reusable components</li> </ul>"},{"location":"architecture/overview/#static-files","title":"Static Files","text":"<p>Static assets in <code>src/web/static/</code> include:</p> <ul> <li>Bootstrap CSS framework</li> <li>Custom CSS for styling</li> <li>JavaScript for interactivity</li> <li>Images and fonts</li> </ul>"},{"location":"development/contributing/","title":"Contributing Guide","text":"<p>Before contributing, ensure you have completed the Development Setup and can successfully run the application locally.</p>"},{"location":"development/contributing/#development-workflow","title":"Development Workflow","text":"<p>Create a working branch:</p> <pre><code>git checkout -b feature/your-feature-name\ncode .\n</code></pre> <p>Code quality checks:</p> <pre><code>uv run pytest\npre-commit run --all-files\n</code></pre> <p>Commit changes:</p> <pre><code>git add .\ngit commit -m \"feat: add new transfer validation\"\ngit push\n</code></pre>"},{"location":"development/contributing/#coding-standards","title":"Coding Standards","text":""},{"location":"development/contributing/#conventional-commits","title":"Conventional Commits","text":"<ul> <li>Use descriptive branch names:</li> <li><code>feature/</code> for new features</li> <li><code>bugfix/</code> for bug fixes</li> <li><code>docs/</code> for documentation changes</li> <li> <p><code>refactor/</code> for code refactoring</p> </li> <li> <p>Use conventional commit prefixes:</p> </li> <li><code>&lt;type&gt;(bump):</code> for breaking changes (triggers a major release)</li> <li><code>feat:</code> for new features (trigger minor release)</li> <li><code>fix:</code> for bug fixes (trigger patch release)</li> <li><code>chore:</code> for maintenance tasks</li> <li><code>docs:</code> for documentation</li> <li><code>refactor:</code> for code refactoring</li> <li><code>test:</code> for test additions or changes</li> </ul>"},{"location":"development/contributing/#python-style-guide","title":"Python Style Guide","text":"<ul> <li>Follow PEP 8 style guidelines</li> <li>Use type hints where appropriate</li> <li>Maximum line length: 120 characters</li> <li>Use descriptive variable and function names</li> </ul>"},{"location":"development/contributing/#testing-requirements","title":"Testing Requirements","text":"<ul> <li>Write unit tests for new functions and methods</li> <li>Add integration tests for new features</li> <li>Maintain or improve code coverage</li> <li>Test edge cases and error conditions</li> </ul>"},{"location":"development/contributing/#code-review-process","title":"Code Review Process","text":"<p>All contributions must go through code review:</p> <ol> <li>Create a pull request with a clear description</li> <li>Ensure all CI/CD checks pass</li> <li>Address reviewer feedback</li> <li>Obtain approval from at least one maintainer</li> </ol>"},{"location":"development/dependencies/","title":"Dependency Management","text":"<p>This project uses <code>uv</code> for Python package management and dependency resolution. Dependencies are defined in <code>pyproject.toml</code> and locked in <code>uv.lock</code>.</p>"},{"location":"development/dependencies/#dependency-files","title":"Dependency Files","text":""},{"location":"development/dependencies/#pyprojecttoml","title":"pyproject.toml","text":"<p>The <code>pyproject.toml</code> file defines project metadata and dependencies:</p> <ul> <li>project.dependencies: Production dependencies</li> <li>dependency-groups.dev: Development dependencies</li> <li>dependency-groups.docs: Documentation dependencies</li> </ul>"},{"location":"development/dependencies/#uvlock","title":"uv.lock","text":"<p>The <code>uv.lock</code> file contains locked versions of all dependencies and their transitive dependencies, ensuring reproducible installations.</p>"},{"location":"development/dependencies/#requirementstxt","title":"requirements.txt","text":"<p>The <code>requirements.txt</code> file is generated from <code>uv.lock</code> and contains only production dependencies for deployment. This file is generated automatically via pre-commit hooks and simplifies compatibility with systems that are not yet compliant with <code>uv</code> dependency management.</p> <p>WARNING: Do not edit the <code>requirements.txt</code> file; let automation handle this file.</p> <p>If you ever need to generate the <code>requirements.txt</code> file manually, here\u2019s how:</p> <pre><code>uv export --no-dev --output-file requirements.txt\n</code></pre>"},{"location":"development/dependencies/#key-dependencies","title":"Key Dependencies","text":"<ul> <li>Django 4.2.4: Web framework</li> <li>pycryptodome 3.18.0: Cryptographic operations</li> <li>PyYAML 5.3.1: YAML parsing</li> <li>sqlparse 0.4.2: SQL parsing utilities</li> </ul>"},{"location":"development/dependencies/#documentation-dependencies","title":"Documentation Dependencies","text":"<ul> <li>mkdocs: Documentation site generator</li> <li>mkdocs-material: Material theme for mkdocs</li> </ul>"},{"location":"development/docker/","title":"Docker Deployment","text":"<p>Ensure Docker is installed on your system. Verify installation:</p> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh ./get-docker.sh\ndocker --version\n</code></pre>"},{"location":"development/docker/#building-the-docker-image","title":"Building the Docker Image","text":"<p>Build the Docker image with build arguments:</p> <pre><code>docker build \\\n  --build-arg GIT_COMMIT=$(git rev-parse --short HEAD) \\\n  --build-arg REPO_URL=$(git config --get remote.origin.url | sed 's/git@/https:\\/\\//; s/.com:/.com\\//; s/\\.git$//') \\\n  --no-cache --file Dockerfile \\\n  --tag insecure-bank .\n</code></pre> <p>This command will build the container with:</p> <ul> <li><code>GIT_COMMIT</code>: Embeds the current Git commit hash into the image</li> <li><code>REPO_URL</code>: Embeds the repository URL into the image</li> </ul>"},{"location":"development/docker/#running-the-container","title":"Running the Container","text":"<p>Stop and remove any existing container, then run a new one:</p> <pre><code>docker stop insecure-bank &amp;&amp; docker rm insecure-bank\ndocker run --detach --publish 8000:8000 --name insecure-bank insecure-bank\n</code></pre> <p>This command will run the container with:</p> <ul> <li><code>--detach</code>: Run the container in the background</li> <li><code>--publish 8000:8000</code>: Map port 8000 from container to host</li> <li><code>--name insecure-bank</code>: Assign a name to the container</li> <li>The application will be available at http://localhost:8000</li> <li>Use the following credentials to log in to the application:</li> <li>Username: guillaume</li> <li>Password: timinou</li> </ul>"},{"location":"development/quality/","title":"Code Quality","text":"<p>Code quality is the measure of how reliable, efficient, readable, and maintainable software code is, encompassing its ability to function correctly, be understood, modified, and extended easily by developers while meeting user needs and security standards. It's about more than just being bug-free; high-quality code is well-structured, performant, testable, and adheres to best practices, making it a valuable asset rather than a liability.</p>"},{"location":"development/quality/#pre-commit","title":"Pre-Commit","text":"<p>pre-commit: a framework for managing and maintaining multi-language pre-commit hooks. prek: an alternative to <code>pre-commit</code>, re-engineered in Rust.</p> <pre><code>pre-commit install --allow-missing-config\npre-commit autoupdate # Update hooks\npre-commit run --all-files # All files\npre-commit run ruff-check # Specific hook\n</code></pre> <p>NOTE: Pre-commit hooks run all checks automatically when enabled properly.</p>"},{"location":"development/quality/#ruff","title":"Ruff","text":"<p>ruff: an extremely fast Python linter and code formatter, written in Rust.</p> <pre><code>uv run ruff check src/ # Check code\nuv run ruff check --fix # Fix issues\nuv run ruff format # Format code\n</code></pre> <p>NOTE: <code>ruff</code> is not fully implemented yet; do not run it.</p>"},{"location":"development/quality/#ty","title":"Ty","text":"<p>ty: an extremely fast Python type checker and language server, written in Rust.</p> <pre><code>uv run ty check src/ # Check code\n</code></pre> <p>NOTE: <code>ty</code> is not fully implemented yet; do not run it.</p>"},{"location":"development/quality/#code-style-guidelines","title":"Code Style Guidelines","text":""},{"location":"development/quality/#python-formatting","title":"Python Formatting","text":"<ul> <li>Maximum line length: 120 characters</li> <li>Use double quotes for strings</li> <li>Add trailing commas in multi-line data structures</li> <li>Follow PEP 8 conventions</li> </ul>"},{"location":"development/quality/#docstrings","title":"Docstrings","text":"<p>Use docstrings for:</p> <ul> <li>Modules</li> <li>Classes</li> <li>Public functions and methods</li> </ul> <p>Follow Google or NumPy docstring style conventions.</p>"},{"location":"development/quality/#cicd-integration","title":"CI/CD Integration","text":"<p>Code quality checks run automatically in CI/CD pipelines:</p> <ul> <li>On pull request creation</li> <li>On commits to the main branch</li> <li>Before deployment</li> </ul> <p>All checks must pass before code can be merged.</p>"},{"location":"development/running/","title":"Running the Application","text":"<p>Start the Django development server:</p> <pre><code>uv run python manage.py runserver\nuv run python manage.py runserver 0.0.0.0:8000 # Bind to specific IP:PORT\n</code></pre> <p>This command starts the local dev server:</p> <ul> <li>The application will be available at http://localhost:8000.</li> <li>Use the following credentials to log in to the application:</li> <li>Username: guillaume</li> <li>Password: timinou</li> </ul>"},{"location":"development/running/#common-management-commands","title":"Common Management Commands","text":"<pre><code>uv run python manage.py migrate             # Apply database migrations\nuv run python manage.py makemigrations      # Create new migrations after model changes\nuv run python manage.py createsuperuser     # Create an administrative user for Django admin\nuv run python manage.py shell               # Access the Django interactive shell\n</code></pre>"},{"location":"development/running/#access-django-admin","title":"Access Django Admin","text":"<p>The Django admin interface is available at http://localhost:8000/admin.</p>"},{"location":"development/setup/","title":"Development Setup","text":"<p>A Makefile is available to simplify repetitive actions and tasks as part of this development workflow.</p> <p>Before setting up the development environment, ensure you have the following installed:</p> <ul> <li>Docker</li> <li>Git</li> <li>Python 3.10.x</li> <li>uv</li> </ul>"},{"location":"development/setup/#install-the-package-manager","title":"Install the package manager","text":"<p>If you do not have <code>uv</code> installed, install it using the official installer:</p> <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <p>For other installation methods, refer to the uv documentation.</p>"},{"location":"development/setup/#virtual-environment","title":"Virtual Environment","text":"<p>Create and activate a virtual environment using <code>uv</code>:</p> <pre><code>uv venv .venv --python 3.10\nsource .venv/bin/activate\nuv sync --all-extras --dev --frozen\nuv sync --group docs  # If you want to create the documentation\n</code></pre> <p>This command will:</p> <ul> <li>Install all production dependencies</li> <li>Install development dependencies (testing, linting, etc.)</li> <li>Install documentation dependencies (mkdocs, mkdocs-material)</li> <li>Lock dependencies to ensure reproducible builds</li> </ul>"},{"location":"development/setup/#database-setup","title":"Database Setup","text":"<p>Initialize the database with migrations:</p> <pre><code>uv run python manage.py migrate\nuv run python manage.py check\n</code></pre> <p>This command will:</p> <ul> <li>Create the SQLite database file (<code>db.sqlite3</code>) and apply all migrations to set up the database schema.</li> <li>Verify that the installation was successful.</li> <li>Check for any issues with your Django project configuration.</li> </ul>"},{"location":"development/setup/#next-steps","title":"Next Steps","text":"<p>After completing the setup, proceed to Running the Application to start the development server.</p>"},{"location":"pipeline/branches/","title":"Branches Pipeline","text":"<p>The Branches Pipeline (<code>CI - Branches</code>) provides early feedback during development by running on feature and development branches.  This workflow is mostly aimed at pre-validation during the initial phase of development (before PR is initiatied); in the event of test or scan failure the workflow continues.</p> <p>Trigger Conditions:</p> <pre><code>on:\n  push:\n    branches:\n      - demo/*\n      - dev\n      - feat/*\n      - fix/*\n      - rel/*\n    paths-ignore:\n      - 'README.md'\n  workflow_dispatch:\n</code></pre> <p>The detailed stages of the <code>branch</code> workflows are as following:</p> <pre><code>---\ntitle: CI - Branches\n---\n%%{ init:\n        {  'logLevel': 'debug',\n            'theme': 'dark'\n        }\n}%%\n\nflowchart LR\n\n  subgraph code[Code]\n    direction LR\n    commit[Trigger] --&gt; hello[Hello World]\n    commit --&gt; pre-commit[Pre-Commit Check]\n    commit --&gt; sdlc[SDLC Scan]\n    pre-commit --&gt; code_build[Matrix: Build &amp; Unit Test] --&gt; container_build[Container Build]--&gt; container_scan[Container Scan]\n    pre-commit --&gt; code_scan[Matrix: Vulnerabilities Scan]\n\n  end</code></pre>"},{"location":"pipeline/branches/#jobs-overview","title":"Jobs Overview","text":"<p>This lightweight approach provides fast feedback while reserving full validation for pull requests and main branch merges.</p>"},{"location":"pipeline/branches/#hello-world","title":"Hello World","text":"<p>Calls a reusable workflow from the organization's shared workflows repository for validation.</p>"},{"location":"pipeline/branches/#sdlc-scan","title":"SDLC Scan","text":"<p>If required, implement the necessary steps to enable Software Development Lifecycle Scan in the phase.</p> <pre><code>  - name: Run SDLC Scan\n    id: sdlc\n    run: |\n      echo Run SDLC Scan\n      echo \"::warning::Must implement a SDLC scan mechanism.\"\n    shell: bash\n</code></pre>"},{"location":"pipeline/branches/#pre-commit-check","title":"Pre-Commit Check","text":"<p>Run check for linting, formatting, and code quality checks.  This steps ensure within certains restriction that developpers have setup the <code>pre-commit</code> framework.</p> <pre><code>  - name: Run Pre-Commit Checks\n    id: precommit\n    uses: ./.github/actions/precommit\n    with:\n      skip: \"pytest, uv-export\"\n    continue-on-error: true\n</code></pre> <p>Runs pre-commit check with <code>continue-on-error: true</code> to provide feedback without blocking development.</p>"},{"location":"pipeline/branches/#build-unit-test","title":"Build &amp; Unit Test","text":"<p>Build the codebase and run all test except the <code>e2e</code> suite for performance purpose.    This matrix steps runs on <code>ubuntu-24.04</code> with <code>python3.10</code>.</p> <pre><code>  - name: Pytest - Run Unit Test\n    id: test\n    run: |\n      uv pip install pytest pytest-cov pytest-django pytest-mock pytest-xdist\n      uv run pytest -m \"not e2e\"\n    shell: bash\n    continue-on-error: true\n</code></pre> <p>Runs build and unit test with <code>continue-on-error: true</code> to provide feedback without blocking development.</p>"},{"location":"pipeline/branches/#vulnerability-scan","title":"Vulnerability Scan","text":"<p>If required, implement the necessary steps to enable SAST and SCA Scan in the phase. This matrix steps runs on both <code>ubuntu-24.04</code> and <code>ubuntu-24.04-arm</code>.</p> <pre><code>  - name: Run SAST\n    id: sast\n    run: |\n      echo Run SAST\n      echo \"::warning::Must implement a code scanning mechanism.\"\n    shell: bash\n\n  - name: Run SCA\n    id: sca\n    run: |\n      echo Run SCA\n      echo \"::warning::Must implement a dependencies scanning mechanism.\"\n    shell: bash\n</code></pre>"},{"location":"pipeline/branches/#container-build","title":"Container Build","text":"<p>Package the container binary image as a docker container without pushing to registry using a composite actions.</p> <pre><code>  - name: Build Docker Image\n    id: docker\n    uses: ./.github/actions/docker\n    with:\n      token: ${{ secrets.GITHUB_TOKEN }}\n      push: false\n</code></pre>"},{"location":"pipeline/branches/#container-scan","title":"Container Scan","text":"<p>If required, implement the necessary steps to enable Container Scan in the phase.</p> <pre><code>  - name: Run Container Scan\n    id: container\n    run: |\n      echo Run Container Scan\n      echo \"::warning::Must implement a container scanning mechanism.\"\n    shell: bash\n</code></pre>"},{"location":"pipeline/dependabot/","title":"Dependabot","text":"<p>Dependabot is a built-in GitHub tool that automates the management of project dependencies, scanning for outdated or vulnerable libraries and automatically creating pull requests (PRs) to update them, helping keep codebases secure and up-to-date with minimal manual effort. It offers Dependabot alerts for known vulnerabilities, security updates to fix them, and version updates to keep all packages current, supporting numerous languages and package managers like npm, pip, and Docker.</p> <p>Trigger Conditions:</p> <ul> <li>docker: weekly</li> <li>github-action: daily</li> <li>pip: yearly</li> </ul> <p>For the purpose of this strategy, let's just ignore vanilla recommendation coming from this workflow although it is available and can be leverage in some from.</p>"},{"location":"pipeline/overview/","title":"Pipeline Overview","text":"<p>The Insecure Bank Corp project uses GitHub Actions for CI|CD platform. The pipeline is designed to ensure code quality, security, and reliable deployments through multiple stages of validation.</p> <p>The CI/CD strategy follows a branch-based workflow with four distinct pipelines triggered by different Git events:</p> Pipeline Trigger Description Status CI - Branches Push to various branches Early feedback during development CI - PR PR to <code>main</code> Comprehensive validation before merge CI - Main Push to <code>main</code> branch Full validation, container build &amp; publish, release CI - Tag Version tags (<code>v*</code>) Semantic release and changelog publication Dependabot Weekly (7 days cooldown) Regular updates for dependencies <p>Most pipelines shares these core stages:</p> <pre><code>---\ntitle: Common Pipeline Stages\n---\n%%{ init:\n        {  'logLevel': 'debug',\n            'theme': 'dark'\n        }\n}%%\n\nflowchart LR\n\n  subgraph core[Core Stages]\n    direction LR\n    commit[Trigger] --&gt; pre-commit[Pre-Commit Checks]\n    pre-commit --&gt; build[Build &amp; Tests] --&gt; gating[Gating]\n    pre-commit --&gt; security[Vulnerabilities Scan] --&gt; gating --&gt; release[Release]\n\n  end</code></pre> <p>At a high level, once a git commit is pushed to the remote repository the various triggers different actions:</p> <ul> <li>Pre-Commit: Check for linting, formatting, and code quality checks</li> <li>Build Phase: Run the build, test and container packaging</li> <li>Security Phase: Run the SDLC, Secret, SAST, SCA and Container scanning</li> <li>Gating Phase: Check if any failure occurs during the Security Phase</li> <li>Release Phase: Trigger the package release once code is merged to <code>main</code></li> </ul>"},{"location":"pipeline/overview/#reusable-workflows-and-composite-actions","title":"Reusable Workflows and Composite Actions","text":"<p>Reusable Workflows create a level of abstraction in the workflow definition allowing easier governance at scale. Composite Actions simplify complexe and compressed multi-steps operations into a single block.</p> <pre><code># ...\n  hello:\n    name: Call Hello World Reusable Workflow\n    uses: mighty-muffin/.github/.github/workflows/reusable-hello-world.yml@main\n#...\n  pre-commit:\n    steps:\n      - name: Run Pre-Commit Checks\n        id: precommit\n        uses: ./.github/actions/precommit\n        with:\n          skip: \"pytest, uv-export\"\n        continue-on-error: true\n# ...\n</code></pre>"},{"location":"pipeline/overview/#concurrency-control","title":"Concurrency Control","text":"<p>All pipelines implement concurrency control to prevent duplicate runs.  This ensures only the latest commit is processed when multiple pushes occur in quick succession.</p> <pre><code>concurrency:\n  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n  cancel-in-progress: true\n</code></pre>"},{"location":"pipeline/overview/#build-platform","title":"Build Platform","text":"<p>This project leverage both <code>amd64</code> and <code>arm64</code> build agent to ensure compatibility accros numerous computer platforms.</p> <pre><code>job_name:\n  needs:\n    - &lt;required-steps&gt;\n  name: &lt;Job Name&gt;\n  runs-on: ${{ matrix.os }}\n  strategy:\n    fail-fast: false\n    matrix:\n      os: [ubuntu-24.04, ubuntu-24.04-arm]\n  timeout-minutes: 10\n</code></pre>"},{"location":"security/overview/","title":"Security Overview","text":"<p>The project is for educational purposes. These are the instructions for the upcoming demonstration. It requires about 6\u20138 hours of work to integrate, run, and accomplish these steps with our current tooling.</p>"},{"location":"security/overview/#setup","title":"Setup","text":"<ul> <li> Fork the insecure-bank-corp with all branches</li> <li> Read the project documentation</li> <li> Verify everything works</li> <li> Run <code>make all</code> from the <code>Makefile</code></li> </ul>"},{"location":"security/overview/#scenario","title":"Scenario","text":"<p>Please take a look at each of the following six (6) scenario.</p> <ol> <li>SDLC Bad Practices</li> <li>Dependency Vulnerabilities</li> <li>Exemption &amp; Waivers</li> <li>Code Vulnerabilities</li> <li>Container Vulnerabilities</li> <li>SBOM Generation</li> </ol> <p>If required use the Branches Pipeline to implement any workflow steps.</p>"},{"location":"security/overview/#and-everything-in-between","title":"And everything in between","text":"<ul> <li>Showcases whatever you wish to highlight during the demonstration</li> <li>Highlights shift-left<sup>1</sup> capabilities has much as possible recommended</li> <li>Allocates the available time to scenario you can present; if you cannot demonstrate a scenario</li> <li>Ignores all hardcoded or leaked credentials; GitGuardian will take care of them</li> </ul> <ol> <li> <p>Shift-left testing \u21a9</p> </li> </ol>"},{"location":"security/scenario-1/","title":"Scenario 1","text":"<p>SDLC Check (5\u201310 min):</p> <p>This project includes misconfigurations and vulnerabilities in the SDLC.</p> <p>NOTE: Given a fork was used, you can load the <code>main</code> and <code>tag</code> repo rulesets to replicate the actual project state.</p>"},{"location":"security/scenario-1/#implementation","title":"Implementation","text":"<p>Demonstrate how your platform can scan and find SDLC issues while providing guidance toward resolution.</p> <pre><code># insecure-bank/.github/workflows/branch.yml\n\n      - name: Run SDLC Scan\n        id: sdlc\n        run: |\n          echo Run SDLC Scan\n          echo \"::warning::Must implement a SDLC scan mechanism.\"\n        shell: bash\n</code></pre> <ul> <li>If your platform allows scanning locally on a developer workstation against the remote repository, please demonstrate how this is achieved.</li> <li>If your platform allows a \"pipeless\" scanning mechanism, please demonstrate how this is achieved.</li> <li>If your platform leverages the CI pipeline as a scanning mechanism, make the required change in the <code>branch.yml</code>  workflow, keeping the id: sdlc for tracking purposes.</li> </ul> <p>NOTE: Use the branch <code>demo/sdlc</code> to track changes in your fork.</p>"},{"location":"security/scenario-1/#what-to-present","title":"What to present","text":"<p>Present how, once your platform is implemented, the Application Security and Developers teams can find and understand SDLC misconfigurations and vulnerabilities.</p> <p>For example, there are no dependency, code, or container scanning tools included in any <code>workflows</code>, only empty placeholders that run dummy bash commands. Furthermore, the applied ruleset permits some users to push code without any gating mechanism applied.</p> <p>Focus on demonstrating how your platform can perform these steps at scale. In real-world scenarios, both AppSec and Dev teams cannot waste time looking at thousands of repository configurations.</p>"},{"location":"security/scenario-1/#write-up","title":"Write Up","text":""},{"location":"security/scenario-2/","title":"Scenario 2","text":"<p>Dependency Vulnerabilities (10\u201315 min):</p> <p>This project includes dependency vulnerabilities in this codebase.</p> <p>The version of PyYAML@5.3.1 included in this project\u2019s <code>pyproject.toml</code> is vulnerable according to CVE-2020-14343 and CVE-2020-1747. The recommendation is to upgrade PyYAML to version 5.4 or higher.</p> <p>Here the a technical exploit writeup explaining the issue with this dependency.</p>"},{"location":"security/scenario-2/#implementation","title":"Implementation","text":"<p>Demonstrate how your platform can scan and find dependency vulnerabilities in this codebase.</p> <pre><code># insecure-bank/.github/workflows/branch.yml\n\n  - name: Run SCA Scan\n    id: sca\n    run: |\n      echo Run SCA Scan\n      echo \"::warning::Must implement a dependencies scanning mechanism.\"\n    shell: bash\n</code></pre> <ul> <li>If your platform allows local scanning on a developer workstation prior to pushing code to the remote repository, please demonstrate how this is achieved.</li> <li>If your platform allows a \"pipeless\" scanning mechanism, please demonstrate how this is achieved.</li> <li>If your platform uses the CI pipeline as a scanning mechanism, make the required change in the <code>branch.yml</code>  workflow, keeping the id: sca for tracking purposes.</li> </ul> <p>NOTE: Use the branch <code>demo/sca</code> to track changes in your fork.</p>"},{"location":"security/scenario-2/#what-to-present","title":"What to present","text":"<p>Present how, once your platform is implemented, the Application Security and Developers teams can find and understand SCA vulnerabilities.</p> <p>For example, showcase your findings for this project, how they are prioritized, and why such priorities are suggested. Explain the overall vision for how dependency vulnerabilities are handled within your platform.</p>"},{"location":"security/scenario-2/#write-up","title":"Write Up<sup>1</sup>","text":"<ol> <li> <p>You can merge changes made in <code>demo/sdlc</code> into <code>demo/sca</code> as a starting point to carry over the storyline you are building.\u00a0\u21a9</p> </li> </ol>"},{"location":"security/scenario-3/","title":"Scenario 3","text":"<p>Exemptions &amp; Waivers (10\u201315 min):</p> <p>This project includes several other dependency vulnerabilities in this codebase.</p> <p>NOTE: Use the branch <code>demo/waivers</code> to track changes in your fork.</p>"},{"location":"security/scenario-3/#implementation","title":"Implementation","text":"<p>Demonstrate how your platform can generate exemptions and/or waivers to ignore all other dependency vulnerabilities until Feb 27, 2026.</p> <pre><code># insecure-bank/.github/workflows/branch.yml\n\n  - name: Run SCA Scan\n    id: sca\n    run: |\n      echo Run SCA Scan\n      echo \"::warning::Must implement a dependencies scanning mechanism.\"\n    shell: bash\n</code></pre> <ul> <li>If your platform allows local scanning on a developer workstation prior to pushing code to the remote repository, please demonstrate how the exemptions/waivers mechanism is handled.</li> <li>If your platform leverages the CI pipeline for the exemptions/waivers mechanism, make the required change in the <code>branch.yml</code>  workflow, keeping the id: sca for tracking purposes.</li> </ul> <p>NOTE: Use the branch <code>demo/waivers</code> to track changes in your fork.</p>"},{"location":"security/scenario-3/#what-to-present","title":"What to present","text":"<p>Present how, once your platform is implemented, the Application Security and Developers teams can find and understand which dependency vulnerabilities are silenced, why, and until when. Explain the overall vision for how dependency vulnerability exemptions/waivers are handled within your platform.</p>"},{"location":"security/scenario-3/#write-up","title":"Write Up<sup>1</sup>","text":"<ol> <li> <p>You can merge changes made in <code>demo/sca</code> into <code>demo/waivers</code> as a starting point to carry over the storyline you are building.\u00a0\u21a9</p> </li> </ol>"},{"location":"security/scenario-4/","title":"Scenario 4","text":"<p>Code Vulnerabilities (10\u201315 min):</p> <p>This project includes several code vulnerabilities in this codebase. Let\u2019s focus on the <code>src/web/views.py</code> file. The <code>get_file_checksum</code> function uses weak cryptography.</p> <pre><code>def get_file_checksum(data: bytes) -&gt; str:\n    (dk, iv) = (secretKey, secretKey)\n    crypter = DES.new(dk, DES.MODE_CBC, iv)\n    padded = pad(data, DES.block_size)\n    encrypted = crypter.encrypt(padded)\n    return base64.b64encode(encrypted).decode(\"UTF-8\")\n</code></pre> <p>The Data Encryption Standard (DES) was officially withdrawn from the NIST recommendations (May 19, 2005) because it no longer provided adequate security (vulnerable to brute-force attacks). This is an obvious example of CWE-327: Use of a Broken or Risky Cryptographic Algorithm, which is a typical issue popularized with the OWASP Top Ten 2025 Category A04:2025 - Cryptographic Failures. It has been replaced by stronger algorithms like the Advanced Encryption Standard (AES).</p>"},{"location":"security/scenario-4/#implementation","title":"Implementation","text":"<ul> <li>Demonstrate how your platform can scan and find code vulnerabilities in this codebase.</li> <li>Demonstrate how your platform provides guidance toward resolution.</li> <li>Demonstrate how your platform implements or suggests vulnerability resolution (e.g., ease of use).</li> <li>Demonstrate how your platform focuses scanning only on new code.</li> </ul> <pre><code># insecure-bank/.github/workflows/branch.yml\n\n  - name: Run SAST Scan\n    id: sast\n    run: |\n      echo Run SAST Scan\n      echo \"::warning::Must implement a code scanning mechanism.\"\n    shell: bash\n</code></pre> <ul> <li>If your platform allows local scanning on a developer workstation prior to pushing code to the remote repository, please demonstrate how this is achieved.</li> <li>If your platform allows a \"pipeless\" scanning mechanism, please demonstrate how this is achieved.</li> <li>If your platform uses the CI pipeline as a scanning mechanism, make the required change in the <code>branch.yml</code>  workflow, keeping the id: sast for tracking purposes.</li> </ul> <p>NOTE: Use the branch <code>demo/sast</code> to track changes in your fork.</p>"},{"location":"security/scenario-4/#what-to-present","title":"What to present","text":"<p>Present how, once your platform is implemented, the Application Security and Developers teams can find and understand SAST vulnerabilities.</p> <p>For example, showcase your findings for this project, how they are prioritized, and why such priorities are suggested. Explain the overall vision for how code vulnerabilities are handled within your platform.</p> <p>If your platform offers coding agent capabilities, showcase how it can be used to resolve the weak cryptography in the <code>get_file_checksum</code> function.</p>"},{"location":"security/scenario-4/#write-up","title":"Write Up<sup>1</sup>","text":"<ol> <li> <p>You can merge changes made in <code>demo/waivers</code> into <code>demo/sast</code> as a starting point to carry over the storyline you are building.\u00a0\u21a9</p> </li> </ol>"},{"location":"security/scenario-5/","title":"Scenario 5","text":"<p>Container Vulnerabilities (10\u201315 min):</p> <p>This project is a containerized application based on Python 3.10 (Alpine) intended to be deployed via orchestration.</p> <p>This project uses the upstream base image python:3.10.11-alpine3.18<sup>2</sup>, which is aging and has not been updated in ages.</p> <p>NOTE: This project must remain on <code>python3.10.X-alpine-3.XX</code>; do not perform a MAJOR upgrade of Python or Alpine.</p>"},{"location":"security/scenario-5/#implementation","title":"Implementation","text":"<ul> <li>Demonstrate how your platform can scan and find vulnerabilities in the upstream container.</li> <li>Demonstrate how your platform can scan and find vulnerabilities in the resulting container.</li> <li>Demonstrate how your platform can scan and find vulnerabilities in the <code>Dockerfile</code></li> <li>Demonstrate how your platform provide guidance toward resolution.</li> <li>Demonstrate how your platform implement|suggest vulnerabilities resolution (i.e.: ease of use).</li> </ul> <pre><code># insecure-bank/.github/workflows/branch.yml\n\n  - name: Run Container Scan\n    id: container\n    run: |\n      echo Run Container Scan\n      echo \"::warning::Must implement a container scanning mechanism.\"\n    shell: bash\n</code></pre> <ul> <li>If your platform allows local scanning on a developer workstation prior to pushing code to the remote repository, please demonstrate how this is achieved.</li> <li>If your platform allows a \"pipeless\" scanning mechanism, please demonstrate how this is achieved.</li> <li>If your platform uses the CI pipeline as a scanning mechanism, make the required change in the <code>branch.yml</code>  workflow, keeping the id: container for tracking purposes.</li> </ul> <p>NOTE: Use the branch <code>demo/container</code> to track changes in your fork.</p>"},{"location":"security/scenario-5/#what-to-present","title":"What to present","text":"<p>Present how, once your platform is implemented, the Application Security and Developers teams can find and understand container vulnerabilities.</p> <p>For example, showcase your findings for this project, how they are prioritized, and why such priorities are suggested. Explain the overall vision for how container vulnerabilities are handled within your platform.</p>"},{"location":"security/scenario-5/#write-up","title":"Write Up<sup>1</sup>","text":"<ol> <li> <p>You can merge changes made in <code>demo/sast</code> into <code>demo/container</code> as a starting point to carry over the storyline you are building.\u00a0\u21a9</p> </li> <li> <p>sha256:def82962a6ee048e54b5bec2fcdfd4aada4a907277ba6b0300f18c836d27f095\u00a0\u21a9</p> </li> </ol>"},{"location":"security/scenario-6/","title":"Scenario 6","text":"<p>SBOM Generation (10\u201315 min):</p> <p>This project is a key application, and a software bill of materials (SBOM) is required for compliance purposes.</p> <p>Regardless of exemptions and waivers, the SBOM must be an immutable artifact attesting to the contents of this web application.</p>"},{"location":"security/scenario-6/#implementation","title":"Implementation","text":"<ul> <li>Demonstrate how your platform can generate an immutable SBOM.</li> <li>Demonstrate how your platform can generate a SBOM for the final container binary.</li> <li>Demonstrate how your platform can scan and find vulnerabilities from a SBOM.</li> <li>Demonstrate how your platform provide guidance toward resolution.</li> </ul> <pre><code># insecure-bank/.github/workflows/branch.yml\n\n  - name: Run Container Scan\n    id: container\n    run: |\n      echo Run Container Scan\n      echo \"::warning::Must implement a container scanning mechanism.\"\n    shell: bash\n</code></pre> <ul> <li>If your platform allows local SBOM generation on a developer workstation, please demonstrate how this is achieved.</li> <li>If your platform allows a \"pipeless\" SBOM generation mechanism, please demonstrate how this is achieved.</li> <li>If your platform uses the CI pipeline for SBOM generation, make the required change in the <code>branch.yml</code>  for tracking purposes.</li> </ul> <p>NOTE: Use the branch <code>demo/sbom</code> to track changes in your fork.</p>"},{"location":"security/scenario-6/#what-to-present","title":"What to present","text":"<p>Present how, once your platform is implemented, the Application Security and Developers teams can find and understand SBOM content and vulnerabilities.</p> <p>For example, showcase your findings for this project, how they are prioritized, and why such priorities are suggested. Explain the overall vision for how SBOMs are handled within your platform.</p>"},{"location":"security/scenario-6/#write-up","title":"Write Up<sup>1</sup>","text":"<ol> <li> <p>You can merge changes made in <code>demo/container</code> into <code>demo/sbom</code> as a starting point to carry over the storyline you are building.\u00a0\u21a9</p> </li> </ol>"},{"location":"testing/overview/","title":"Testing Overview","text":"<p>The pytest framework makes it easy to write small tests yet scales to support complex functional testing. A couple of add-ons are installed (<code>pytest-cov</code>, <code>pytest-django</code>, <code>pytest-mock</code>, <code>pytest-xdist</code>) to improve the experience.</p> <p>The project includes a comprehensive test suite organized by test type:</p> <pre><code>tests/\n\u251c\u2500\u2500 e2e/               # End-to-end tests using Playwright\n\u251c\u2500\u2500 integration/       # Integration tests for component interactions\n\u251c\u2500\u2500 security/          # Security vulnerability tests\n\u2514\u2500\u2500 unit/              # Unit tests for individual components\n</code></pre> <p>This project uses pytest-xdist, a pytest plugin for distributed testing and loop-on-failures modes. <code>pytest-xdist</code> shards your test suite across all available CPU cores for faster performance. Sometimes it can generate flaky tests, but it\u2019s rare. Just re-run the tests and you should be fine.</p> <p>There is a minimal set of e2e tests using Playwright.</p>"},{"location":"testing/overview/#running-tests","title":"Running Tests","text":"<p>Execute the complete test suite:</p> <pre><code>uv run playwright install --with-deps       # Install additional playwright dependencies\nuv run pytest                               # Run the whole test suite\nuv run pytest tests/unit/test_models.py     # Run a single test file\nuv run pytest --cov=src                     # Generate code coverage reports\nuv run pytest -m unit                       # Specific marker\n</code></pre>"}]}